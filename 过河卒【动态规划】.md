---
title: 过河卒【动态规划】
date: 2023-04-02 21:24:35
tags: 动态规划
categories:
- 算法竞赛
---
# [NOIP2002 普及组] 过河卒
题目地址：[过河卒](https://www.luogu.com.cn/problem/P1002)
<!--more-->
## 题目描述

棋盘上 `A` 点有一个过河卒，需要走到目标 `B` 点。卒行走的规则：可以向下、或者向右。同时在棋盘上 'C' 点有一个对方的马，该马所在的点和所有跳跃一步可达的点称为对方马的控制点。因此称之为“马拦过河卒”。

棋盘用坐标表示，`A` 点 `(0, 0)`、`B` 点 `(n, m)`，同样马的位置坐标是需要给出的。

![](https://cdn.luogu.com.cn/upload/image_hosting/vg6k477j.png)

现在要求你计算出卒从 `A` 点能够到达 `B` 点的路径的条数，假设马的位置是固定不动的，并不是卒走一步马走一步。

## 输入格式

一行四个正整数，分别表示 `B` 点坐标和马的坐标。

## 输出格式

一个整数，表示所有的路径条数。

## 样例 #1

### 样例输入 #1

```
6 6 3 3
```

### 样例输出 #1

```
6
```

## 提示

对于 `100%` 的数据，`1 <= n, m <= 20`，`0` 马的坐标 ` 20`。

**【题目来源】**
NOIP 2002 普及组第四题  
## 分析：  

解法：  
第一次尝试使用DFS算法，最终40分，**TLE**。    
  
    
第二次尝试**DP**，定理：从（0，0）到（n，m）的距离为**f[n][m] = f[n-1][m] + f[n][m-1]**.(坐标距离问题的动态规划方程)  
条件：边界设置为1
第一步：设置马的落点，总共八种落点可能所以有八种组合。  
第二步：设置边界，使边界为1.  
第三步：进行DP递推。  
第四步：输出f[n][m]的值。   


```cpp
#include <iostream>
using namespace std;
long long f[21][21];//棋盘
int g[21][21];//马落点数组

int mx_x[8] = {1,1,-1,-1,2,2,-2,-2};//马的x落点位
int my_y[8] = {2,-2,2,-2,1,-1,1,-1};//马的y落点位
//马落点检查函数
bool Check_1(int x,int y){
    if(x < 0 || y < 0 || x > 20 || y > 20)
        return false;
    return true;
}
//生成马落地函数
void M(int x,int y){
    g[x][y] = 1;
    for(int i=0;i<8;i++)
        if(Check_1(x+mx_x[i],y+my_y[i]))
            g[x+mx_x[i]][y+my_y[i]] = 1;
}

int main(){
    int x,y,mx,my;
    cin >> x >> y >> mx >> my;
    M(mx,my);
    for(int i=0;i<=x;i++)
        for(int j=0;j<=y;j++){
            if(!g[i][j]){
                if(i == 0 && j == 0)
                    f[i][j] = 1;
                else if(i == 0 && j > 0)
                    f[i][j] = f[i][j-1];
                else if(i > 0 && j == 0)
                    f[i][j] = f[i-1][j];
                else
                    f[i][j] = f[i-1][j] + f[i][j-1];
            }
        }
    printf("%lld\n",f[x][y]);

    return 0;
}
```

## 思考与感悟
动态规划的步骤：
1. **划分**：按照问题的特征，把问题分为若干阶段。注意：划分后的阶段一定是有序的或者可排序的
2. **确定状态和状态变量**：将问题发展到各个阶段时所处的各种不同的客观情况表现出来。状态的选择要满足无后续性
3. **确定决策并写出状态转移方程**：状态转移就是根据上一阶段的决策和状态来导出本阶段的状态。根据相邻两个阶段状态之间的联系来确定决策方法和状态转移方程
4. **边界条件**：状态转移方程是一个递推式，因此需要找到递推终止的条件